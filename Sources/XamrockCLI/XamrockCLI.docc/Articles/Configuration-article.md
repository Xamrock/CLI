# Configuration

Customize your exploration behavior with configuration options.

## Overview

Xamrock CLI provides extensive configuration options to tailor explorations to your specific needs. This guide covers all available options and how to use them effectively.

## Command-Line Options

### Required Options

#### --app (Bundle Identifier)

Specifies the bundle ID of your iOS application:

```bash
xamrock explore --app com.example.YourApp
```

### Basic Options

#### --steps (Exploration Steps)

Controls how many interaction steps the AI performs:

```bash
xamrock explore --app com.example.App --steps 30
```

- **Default**: 20 steps
- **Recommended**: 20-50 for thorough exploration
- **Quick tests**: 10-15 steps
- **Comprehensive**: 50+ steps

#### --goal (Exploration Goal)

Guides the AI toward specific areas or flows:

```bash
xamrock explore \
  --app com.example.ShoppingApp \
  --goal "Test the checkout flow and payment screens"
```

Examples:
- "Explore the app systematically" (default)
- "Test authentication and login flows"
- "Find accessibility issues"
- "Test navigation and deep linking"

#### --output (Output Directory)

Specifies where to save results:

```bash
xamrock explore \
  --app com.example.App \
  --output ./custom-results
```

**Default**: `./scout-results`

### Advanced Options

#### --platform

Specify the target platform:

```bash
xamrock explore --app com.example.App --platform ios
```

- **ios**: iOS applications (default, auto-detected)
- **android**: Android applications (coming soon)

#### --device

Target a specific simulator or device:

```bash
xamrock explore \
  --app com.example.App \
  --device "iPhone 15 Pro Max"
```

**Default**: Uses the default iOS simulator

#### --verbose

Enable detailed output:

```bash
xamrock explore --app com.example.App --verbose
```

Shows:
- Environment validation details
- File generation progress
- Configuration values

### CI/CD Options

#### --ci-mode

Enables CI-friendly behavior:

```bash
xamrock explore --app com.example.App --ci-mode
```

Enables:
- Deterministic results (fixed seed, low temperature)
- Minimal output for CI logs
- JSON manifest generation

#### --fail-on-issues

Exit with non-zero code if issues are found:

```bash
xamrock explore \
  --app com.example.App \
  --fail-on-issues
```

Useful for:
- CI/CD pipelines that should fail on test failures
- Quality gates
- Automated regression detection

#### --no-generate-dashboard

Skip HTML dashboard generation:

```bash
xamrock explore \
  --app com.example.App \
  --no-generate-dashboard
```

Benefits:
- Faster test execution
- Smaller output size
- Suitable for CI environments where dashboards aren't needed

## Configuration Profiles

### Development Profile

For local development and debugging:

```bash
xamrock explore \
  --app com.example.App \
  --steps 15 \
  --verbose \
  --output ./dev-results
```

### Testing Profile

For thorough manual testing:

```bash
xamrock explore \
  --app com.example.App \
  --steps 40 \
  --goal "Explore all major features" \
  --output ./test-results
```

### CI Profile

For continuous integration:

```bash
xamrock explore \
  --app com.example.App \
  --steps 25 \
  --ci-mode \
  --fail-on-issues \
  --no-generate-dashboard \
  --output ./ci-results
```

### Quick Check Profile

For rapid iteration:

```bash
xamrock explore \
  --app com.example.App \
  --steps 10 \
  --no-generate-dashboard
```

## Generated Test Configuration

The generated test file contains an `ExplorationConfig` that you can customize:

```swift
let config = ExplorationConfig(
    steps: 20,
    goal: "Explore the app systematically",
    outputDirectory: URL(fileURLWithPath: "./scout-results"),
    generateTests: true,
    generateDashboard: true,
    failOnCriticalIssues: false,
    verboseOutput: false
)
```

You can modify these values in the test file for different behavior without regenerating.

## Environment Variables

Xamrock CLI respects the following environment variables:

### XAMROCK_OUTPUT_DIR

Default output directory:

```bash
export XAMROCK_OUTPUT_DIR=~/xamrock-results
xamrock explore --app com.example.App
```

### XAMROCK_DEFAULT_STEPS

Default number of steps:

```bash
export XAMROCK_DEFAULT_STEPS=30
xamrock explore --app com.example.App
```

## Output Structure

The CLI generates a structured output directory:

```
scout-results/
├── ScoutCLIExploration.swift    # Test file (generated by CLI)
├── manifest.json                 # Metadata (generated by CLI)
└── 2025-10-27_23-34-49_ABC123/  # Results (generated when test runs)
    ├── GeneratedTests.swift
    ├── FailureReport.md
    └── dashboard.html
```

Files generated by CLI:
- `ScoutCLIExploration.swift`: Add this to your Xcode project
- `manifest.json`: Machine-readable metadata

Files generated when test runs:
- Timestamped folder with exploration results
- Generated test suite
- Dashboard and reports

## Best Practices

### 1. Start Small

Begin with fewer steps and increase as needed:

```bash
# First run
xamrock explore --app com.example.App --steps 10

# If successful, scale up
xamrock explore --app com.example.App --steps 30
```

### 2. Use Specific Goals

Guide the AI toward areas of interest:

```bash
xamrock explore \
  --app com.example.App \
  --goal "Test the new search feature introduced in v2.0"
```

### 3. Combine Options Strategically

For CI environments:

```bash
xamrock explore \
  --app com.example.App \
  --steps 25 \
  --ci-mode \
  --fail-on-issues \
  --no-generate-dashboard
```

For comprehensive testing:

```bash
xamrock explore \
  --app com.example.App \
  --steps 50 \
  --goal "Comprehensive feature coverage" \
  --verbose
```

### 4. Version Control the Test File

Add the generated test to version control:

```bash
git add YourAppUITests/ScoutCLIExploration.swift
git commit -m "Add AI exploration test"
```

This allows team members to run explorations without regenerating.

## Next Steps

- Review <doc:CI-Integration> for automation
- Check <doc:Troubleshooting> for common issues
- Learn about <doc:GeneratedTests> format
